{"ast":null,"code":"import MyHeader from './components/MyHeader.vue';\nimport MyList from './components/MyList.vue';\n// import {v4 as uuidv4} from \"uuid\";\n\nexport default {\n  name: 'App',\n  components: {\n    MyHeader,\n    MyList\n  },\n  data() {\n    return {\n      dataList: JSON.parse(localStorage.getItem('tasks')) || []\n    };\n  },\n  methods: {\n    submitTask(addTask, event) {\n      console.log(\"我收到了数据：\", addTask);\n      //获取input的值\n      // const val = event.target.value\n      // const addTask = {\n      //   id: uuidv4(),\n      //   name: val,\n      //   flag: false\n      // }\n      this.dataList.unshift(addTask);\n      event.target.value = null;\n    },\n    deleteTask(event, id) {\n      this.dataList = this.dataList.filter(item => item.id !== id);\n      console.log(\"我是被删除后的数组长度\", this.dataList.length);\n    },\n    changeFlag(flag, type, id) {\n      if (\"2\" === type) {\n        this.dataList.forEach(item => {\n          if (item.id === id) {\n            console.log(\"@@@\", type, flag);\n            item.flag = flag;\n          }\n        });\n      } else {\n        this.dataList.forEach(item => {\n          item.flag = flag;\n        });\n      }\n    },\n    clearTask() {\n      this.dataList = this.dataList.filter(item => {\n        return item.flag === false;\n      });\n    }\n  },\n  watch: {\n    dataList: {\n      //开启深度监视, 可以监视数组里面对象属性的改变, 不开启只能监视数组的改变\n      deep: true,\n      handler(value) {\n        localStorage.setItem('tasks', JSON.stringify(value));\n      }\n    }\n  },\n  mounted() {\n    this.$bus.$on('sendTask', this.submitTask);\n  },\n  beforeDestroy() {\n    this.$bus.$off('sendTask');\n  }\n};","map":{"version":3,"names":["MyHeader","MyList","name","components","data","dataList","JSON","parse","localStorage","getItem","methods","submitTask","addTask","event","console","log","unshift","target","value","deleteTask","id","filter","item","length","changeFlag","flag","type","forEach","clearTask","watch","deep","handler","setItem","stringify","mounted","$bus","$on","beforeDestroy","$off"],"sources":["src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <!-- <img alt=\"Vue logo\" src=\"./assets/logo.png\"> -->\n    <!--    <MyHeader @submitTask=\"submitTask\"></MyHeader>-->\n    <MyHeader></MyHeader>\n    <MyList :dataList=\"dataList\" :deleteTask=\"deleteTask\" :changeFlag=\"changeFlag\" v-show=\"dataList.length\"\n            :clearTask=\"clearTask\"></MyList>\n  </div>\n</template>\n\n<script>\n\nimport MyHeader from './components/MyHeader.vue'\nimport MyList from './components/MyList.vue'\n// import {v4 as uuidv4} from \"uuid\";\n\nexport default {\n  name: 'App',\n  components: {\n    MyHeader,\n    MyList\n  },\n  data() {\n    return {\n      dataList: JSON.parse(localStorage.getItem('tasks')) || []\n    }\n  },\n  methods: {\n    submitTask(addTask, event) {\n      console.log(\"我收到了数据：\", addTask)\n      //获取input的值\n      // const val = event.target.value\n      // const addTask = {\n      //   id: uuidv4(),\n      //   name: val,\n      //   flag: false\n      // }\n      this.dataList.unshift(addTask)\n      event.target.value = null\n    },\n    deleteTask(event, id) {\n      this.dataList = this.dataList.filter(item => item.id !== id)\n      console.log(\"我是被删除后的数组长度\", this.dataList.length)\n    },\n    changeFlag(flag, type, id) {\n      if (\"2\" === type) {\n        this.dataList.forEach(item => {\n          if (item.id === id) {\n            console.log(\"@@@\", type, flag)\n            item.flag = flag\n          }\n        })\n\n      } else {\n        this.dataList.forEach(item => {\n          item.flag = flag\n        })\n      }\n    },\n    clearTask() {\n      this.dataList = this.dataList.filter(item => {\n        return item.flag === false\n      })\n    }\n  },\n  watch: {\n    dataList: {\n      //开启深度监视, 可以监视数组里面对象属性的改变, 不开启只能监视数组的改变\n      deep: true,\n      handler(value) {\n        localStorage.setItem('tasks', JSON.stringify(value))\n      }\n    }\n  },\n  mounted() {\n    this.$bus.$on('sendTask', this.submitTask)\n  },\n  beforeDestroy() {\n    this.$bus.$off('sendTask');\n  }\n}\n</script>\n\n<style>\n#app {\n  /* font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; */\n  text-align: center;\n  /* color: #2c3e50;\n  margin-top: 60px; */\n}\n</style>\n"],"mappings":"AAYA,OAAAA,QAAA;AACA,OAAAC,MAAA;AACA;;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH,QAAA;IACAC;EACA;EACAG,KAAA;IACA;MACAC,QAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,WAAAC,OAAA,EAAAC,KAAA;MACAC,OAAA,CAAAC,GAAA,YAAAH,OAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,KAAAP,QAAA,CAAAW,OAAA,CAAAJ,OAAA;MACAC,KAAA,CAAAI,MAAA,CAAAC,KAAA;IACA;IACAC,WAAAN,KAAA,EAAAO,EAAA;MACA,KAAAf,QAAA,QAAAA,QAAA,CAAAgB,MAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAF,EAAA,KAAAA,EAAA;MACAN,OAAA,CAAAC,GAAA,qBAAAV,QAAA,CAAAkB,MAAA;IACA;IACAC,WAAAC,IAAA,EAAAC,IAAA,EAAAN,EAAA;MACA,YAAAM,IAAA;QACA,KAAArB,QAAA,CAAAsB,OAAA,CAAAL,IAAA;UACA,IAAAA,IAAA,CAAAF,EAAA,KAAAA,EAAA;YACAN,OAAA,CAAAC,GAAA,QAAAW,IAAA,EAAAD,IAAA;YACAH,IAAA,CAAAG,IAAA,GAAAA,IAAA;UACA;QACA;MAEA;QACA,KAAApB,QAAA,CAAAsB,OAAA,CAAAL,IAAA;UACAA,IAAA,CAAAG,IAAA,GAAAA,IAAA;QACA;MACA;IACA;IACAG,UAAA;MACA,KAAAvB,QAAA,QAAAA,QAAA,CAAAgB,MAAA,CAAAC,IAAA;QACA,OAAAA,IAAA,CAAAG,IAAA;MACA;IACA;EACA;EACAI,KAAA;IACAxB,QAAA;MACA;MACAyB,IAAA;MACAC,QAAAb,KAAA;QACAV,YAAA,CAAAwB,OAAA,UAAA1B,IAAA,CAAA2B,SAAA,CAAAf,KAAA;MACA;IACA;EACA;EACAgB,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,kBAAAzB,UAAA;EACA;EACA0B,cAAA;IACA,KAAAF,IAAA,CAAAG,IAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}